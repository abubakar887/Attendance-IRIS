<!DOCTYPE html>
{% load static %}

<html>

<head>
    <title>Update Student Record</title>
    <link href="{% static 'CSS/update-style.css' %}" rel="stylesheet" type="text/css">
    <link rel='icon' href="{% static '/Images/face-attendance-icon.png' %}">
    <link rel="stylesheet" href="https://pro.fontawesome.com/releases/v5.10.0/css/all.css">
</head>

<body>
    <div class="wrapper">
        <div class="sidebar">
            <a href="{% url 'index' %}"><img src={% static 'Images/FRAS_Logo.png' %}></a>
            <ul>
                <li><a href="{% url 'index' %}"><i class="fas fa-home"></i>Home</a></li>
                <li><a href="{% url 'student' %}"><i class="fas fa-user"></i>Register Student</a></li>
                <li><a href="{% url 'search_record' %}"><i class="fas fa-search"></i>Search & Update</a></li>
                <li><a href="{% url 'teacher' %}"><i class="fas fa-user"></i>Register Teacher</a></li>
                <li><a href="{% url 'login_form' %}"><i class="fas fa-sign-out"></i>Logout</a></li>
                <li><a href="{% url 'admin_faqs' %}"><i class="fas fa-question-circle"></i>Help</a></li>
            </ul>
        </div>
            
        <div class="update_form">
            <div style="float: left;margin-right: 40px;">
                <h2>Update Student Record</h2>
                <img src="{{user.student.profile_picture.url}}" height="200" width="200">
                <form action="{% url 'updateStudentDetails' user.id %}" method="post" >
                    {% csrf_token %}

                    <table style="width: 100%;">
                        <!-- <caption>Update Student Record</caption> -->
                        <tr>
                            <th>Student Name</th>
                            <td><input type="text" class="input" name="fname" maxlength="30" title="Enter Name"
                                    placeholder="Student Name" required value="{{user.first_name}}"/></td>
                        </tr>
                        <tr>
                            <th>Student Arid ID</th>
                            <td><input type="text" class="input" placeholder="Student ID" required name="student_id"  value="{{user.username}}" readonly/></td>
                        </tr>
                        <tr>
                            <th>Student Department</th>
                            <td>
                                <!-- <input type="text" class="input" name="department" placeholder="Enter Student Department" required/> -->
                                <select name="department" id="department" class="form-control" placeholder="Department" value="{{user.student.department}}"
                                    required>
                                    <option value="" disabled >Department</option>
                                    <option value="Computer Science">Computer Science</option>
                                    <option value="Life Science">Life Science</option>
                                    <option value="BBA">BBA</option>
                                    <option value="Math">Math</option>
                                </select>
                            </td>
                        <tr>
                            <th>Student Program</th>
                            <td>
                                <!-- <input type="text" class="input" name="program" placeholder="Student Program" required/> -->
                                <select name="program" id="program" class="form-control" placeholder="Student Program" value="{{user.student.program}}"
                                    required>
                                    <option value="" disabled >Student Program</option>
                                    <option value="BSCS">BSCS</option>
                                    <option value="BSIT">BSIT</option>
                                    <option value="BSCS (AI)">BSCS (AI)</option>
                                    <option value="BSSE">BSSE</option>
                                    <option value="BS Zoology">BS Zoology</option>
                                    <option value="BS Botany">BS Botany</option>
                                    <option value="BS Biochemistry">BS Biochemistry</option>
                                    <option value="BS Math">BS Math</option>
                                    <option value="BS Microbiology">BS Microbiology</option>

                                    <option value="BS HND">BS HND</option>
                                    <option value="BBA 2 Years">BBA 2 Years</option>
                                    <option value="BBA">BBA</option>


                                </select>
                            </td>
                        </tr>
                        <tr>
                            <th>Student Semester</th>
                            <td>
                                <!-- <input type="text" class="input" name="semester" placeholder="Enter Student Semester" required/> -->
                                <select name="semester" id="semester" class="form-control" placeholder="Semester" value="{{user.student.semester}}"
                                    required>
                                    <option value="" disabled >Select Semester</option>
                                    <option value=1>Semester 1</option>
                                    <option value=2>Semester 2</option>
                                    <option value=3>Semester 3</option>
                                    <option value=4>Semester 4</option>
                                    <option value=5>Semester 5</option>
                                    <option value=6>Semester 6</option>
                                    <option value=7>Semester 7</option>
                                    <option value=8>Semester 8</option>
                                </select>
                            </td>
                        </tr>
                        <td colspan="2">
                            <input class="update_btn" type="submit" value="Update" />

                        </td>
                        </tr>
                    </table>
                <input type="hidden" id="dum" name="image_data" value="">

                </form>
            </div>

            <div class="cam">
                <div class="video-wrap">
                    <video id="video" autoplay></video>

                </div>
                <div class="controller"><input type="submit" id="snap" class="take_pic" value="Take Picture"></div>
                <canvas id="canvas" width="300px" height="200px"></canvas>
            </div>
        </div>
    </div>
    <script>
        const video = document.getElementById('video');
        const canvas = document.getElementById('canvas');
        const snap = document.getElementById('snap');

        if (navigator.mediaDevices.getUserMedia) {
            navigator.mediaDevices.getUserMedia({ video: true })
                .then(function (stream) {
                    video.srcObject = stream;
                })
                .catch(function (error) {
                    console.log("Something went wrong!");
                });
        }
        var context = canvas.getContext('2d');
        snap.addEventListener("click", function () {
            context.drawImage(video, 0, 0, 300, 200);
            var Pic = document.getElementById("canvas").toDataURL("image/jpg");
            document.getElementById("dum").value = Pic;
        });
        
    </script>
</body>

</html>